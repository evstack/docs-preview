import{_ as s,c as a,ag as n,o as t}from"./chunks/framework.CqS1Vq-p.js";const c=JSON.parse('{"title":"Evolve EVM Chain Migration Guide","description":"","frontmatter":{"head":[["meta",{"name":"og:title","content":"Evolve EVM Chain Migration Guide | Evolve"},{"name":"og:description","content":false}]]},"headers":[],"relativePath":"guides/evm/migration.md","filePath":"guides/evm/migration.md","lastUpdated":1755615801000}'),e={name:"guides/evm/migration.md"};function l(h,i,r,o,p,k){return t(),a("div",null,i[0]||(i[0]=[n(`<h1 id="evolve-evm-chain-migration-guide" tabindex="-1">Evolve EVM Chain Migration Guide <a class="header-anchor" href="#evolve-evm-chain-migration-guide" aria-label="Permalink to &quot;Evolve EVM Chain Migration Guide&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>This guide covers how to perform a chain migration for Evolve EVM-based blockchains using reth&#39;s <code>dump-genesis</code> and <code>init</code> functions. Chain migration allows you to export the current state of your blockchain and initialize a new chain with that state, which is useful for major upgrades, network resets, or transitioning between different configurations.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><p>Before starting a chain migration, ensure you have:</p><ul><li>A running Evolve EVM node with fully synchronized state</li><li>reth CLI tool installed and configured</li><li>Sufficient disk space for state export (at least 2x current state size)</li><li>Access to all node operators in your network</li><li>Coordination with external services (see <a href="#external-services-coordination">External Services Coordination</a>)</li><li>Backup of critical data and configurations</li></ul><h2 id="understanding-chain-migration" tabindex="-1">Understanding Chain Migration <a class="header-anchor" href="#understanding-chain-migration" aria-label="Permalink to &quot;Understanding Chain Migration&quot;">​</a></h2><p>Chain migration involves several critical steps:</p><ol><li><strong>State Export</strong>: Extracting the current blockchain state at a specific block height</li><li><strong>Genesis Generation</strong>: Creating a new genesis file with the exported state</li><li><strong>Network Coordination</strong>: Ensuring all validators and nodes migrate simultaneously</li><li><strong>Service Updates</strong>: Updating external services to recognize the new chain</li></ol><h2 id="step-by-step-migration-process" tabindex="-1">Step-by-Step Migration Process <a class="header-anchor" href="#step-by-step-migration-process" aria-label="Permalink to &quot;Step-by-Step Migration Process&quot;">​</a></h2><h3 id="_1-pre-migration-planning" tabindex="-1">1. Pre-Migration Planning <a class="header-anchor" href="#_1-pre-migration-planning" aria-label="Permalink to &quot;1. Pre-Migration Planning&quot;">​</a></h3><p>Before initiating the migration, establish a clear plan:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Document current chain parameters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_chainId&quot;,&quot;params&quot;:[],&quot;id&quot;:1}&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  http://localhost:8545</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Record current block height for migration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_blockNumber&quot;,&quot;params&quot;:[],&quot;id&quot;:1}&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  http://localhost:8545</span></span></code></pre></div><h3 id="_2-coordinate-migration-block-height" tabindex="-1">2. Coordinate Migration Block Height <a class="header-anchor" href="#_2-coordinate-migration-block-height" aria-label="Permalink to &quot;2. Coordinate Migration Block Height&quot;">​</a></h3><p>All network participants must agree on:</p><ul><li><strong>Migration block height</strong>: The specific block at which to export state</li><li><strong>Migration timestamp</strong>: When the migration will occur</li><li><strong>New chain parameters</strong>: Chain ID, network ID, and other configurations</li></ul><h3 id="_3-stop-the-node-at-target-height" tabindex="-1">3. Stop the Node at Target Height <a class="header-anchor" href="#_3-stop-the-node-at-target-height" aria-label="Permalink to &quot;3. Stop the Node at Target Height&quot;">​</a></h3><p>Configure your node to stop at the agreed-upon migration height. Both the Evolve node and ev-reth must be stopped to properly export the genesis state:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Stop the Evolve node gracefully</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or if running as a service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Stop ev-reth</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-reth</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or if running as a service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-reth</span></span></code></pre></div><p><strong>Important</strong>: ev-reth must be completely shutdown before running <code>dump-genesis</code> as the export process requires exclusive access to the database.</p><h3 id="_4-export-current-state-using-reth-dump-genesis" tabindex="-1">4. Export Current State Using reth dump-genesis <a class="header-anchor" href="#_4-export-current-state-using-reth-dump-genesis" aria-label="Permalink to &quot;4. Export Current State Using reth dump-genesis&quot;">​</a></h3><p>reth dump-genesis exports the current head state in the node’s local database into a genesis file. It does not accept a --block flag, so to capture a specific migration height you must prepare the DB first.</p><p>⸻</p><p>Option 1 — Stop at the target height before dumping</p><ul><li>Sync your Evolve/reth node to the agreed migration height.</li><li>Disable block production or stop the sequencer so no new blocks are added.</li><li>Run dump-genesis while the DB is exactly at the migration height.</li></ul><h4 id="stop-node-at-migration-height" tabindex="-1">Stop node at migration height <a class="header-anchor" href="#stop-node-at-migration-height" aria-label="Permalink to &quot;Stop node at migration height&quot;">​</a></h4><p>systemctl stop evolve-node</p><h4 id="export-state-at-current-head-must-be-migration-height" tabindex="-1">Export state at current head (must be migration height) <a class="header-anchor" href="#export-state-at-current-head-must-be-migration-height" aria-label="Permalink to &quot;Export state at current head (must be migration height)&quot;">​</a></h4><p>ev-reth dump-genesis <br> --datadir /path/to/reth/datadir <br> --output genesis-export.json</p><p>⸻</p><p>Option 2 — Rewind DB to migration height</p><p>If your node has already synced past the migration block:</p><p>reth db revert-to-block &lt;MIGRATION_BLOCK_HEIGHT&gt; --datadir /path/to/reth/datadir</p><h4 id="then-dump-the-state" tabindex="-1">Then dump the state <a class="header-anchor" href="#then-dump-the-state" aria-label="Permalink to &quot;Then dump the state&quot;">​</a></h4><p>reth dump-genesis <br> --datadir /path/to/reth/datadir <br> --output genesis-export.json</p><p>⸻</p><p>Verification after export:</p><h4 id="number-of-accounts-in-alloc" tabindex="-1">Number of accounts in alloc <a class="header-anchor" href="#number-of-accounts-in-alloc" aria-label="Permalink to &quot;Number of accounts in alloc&quot;">​</a></h4><p>jq &#39;.alloc | length&#39; genesis-export.json</p><h4 id="review-chain-configuration" tabindex="-1">Review chain configuration <a class="header-anchor" href="#review-chain-configuration" aria-label="Permalink to &quot;Review chain configuration&quot;">​</a></h4><p>jq &#39;.config&#39; genesis-export.json</p><p>The exported genesis will contain:</p><ul><li>All account balances and nonces</li><li>Contract bytecode and storage</li><li>Current chain configuration</li></ul><h3 id="_5-prepare-new-genesis-configuration" tabindex="-1">5. Prepare New Genesis Configuration <a class="header-anchor" href="#_5-prepare-new-genesis-configuration" aria-label="Permalink to &quot;5. Prepare New Genesis Configuration&quot;">​</a></h3><p>Once you have genesis-export.json, update it for the new chain parameters.</p><p>⸻</p><p>If staying in the same stack (only chain ID / forks change)</p><p>Use jq to adjust the config:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.config.chainId = &lt;NEW_CHAIN_ID&gt; |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.homesteadBlock = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.eip150Block = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.eip155Block = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.eip158Block = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.byzantiumBlock = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.constantinopleBlock = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.petersburgBlock = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.istanbulBlock = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.berlinBlock = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.londonBlock = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.shanghaiTime = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.cancunTime = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.pragueTime = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .config.osakaTime = 0 |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .timestamp = &lt;NEW_GENESIS_TIMESTAMP&gt;&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    genesis-export.json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genesis-new.json</span></span></code></pre></div><h3 id="_6-initialize-new-chain-with-reth-init" tabindex="-1">6. Initialize New Chain with reth init <a class="header-anchor" href="#_6-initialize-new-chain-with-reth-init" aria-label="Permalink to &quot;6. Initialize New Chain with reth init&quot;">​</a></h3><p>Initialize the new chain using the modified genesis:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clean the old datadir or use a new one</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/new/reth/datadir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Initialize with new genesis</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reth</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --datadir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/new/reth/datadir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --chain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genesis-new.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify initialization</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reth</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stats</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --datadir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/new/reth/datadir</span></span></code></pre></div><h3 id="_7-update-node-configuration-and-purge-data" tabindex="-1">7. Update Node Configuration and Purge Data <a class="header-anchor" href="#_7-update-node-configuration-and-purge-data" aria-label="Permalink to &quot;7. Update Node Configuration and Purge Data&quot;">​</a></h3><p>Update your Evolve node configuration for the new chain and purge the data directory:</p><p><strong>CRITICAL</strong>: Always preserve the <code>$HOME_DIR/config</code> directory as it contains essential sequencer node ID and private keys.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Update the configuration file with new chain ID</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Edit $HOME_DIR/config/evolve.yaml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/chain_id: .*/chain_id: &lt;NEW_CHAIN_ID&gt;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HOME_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/config/evolve.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Purge the data directory</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HOME_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/data</span></span></code></pre></div><p><strong>Important Notes</strong>:</p><ul><li>The <code>$HOME_DIR/config</code> directory contains critical sequencer node identity and private keys</li><li><strong>Never delete the config directory</strong> - this would result in loss of node identity</li><li>Only the <code>data</code> directory should be purged to start fresh with the new chain</li><li>Backup your config directory before migration as an additional safety measure</li></ul><h3 id="_8-start-the-new-chain" tabindex="-1">8. Start the New Chain <a class="header-anchor" href="#_8-start-the-new-chain" aria-label="Permalink to &quot;8. Start the New Chain&quot;">​</a></h3><p>Start your node with the new configuration:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start Evolve node with new configuration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-reth</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or if running as a service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-reth</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Monitor logs for successful startup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-reth</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or if running as a service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xeu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ev-reth</span></span></code></pre></div><h2 id="external-services-coordination" tabindex="-1">External Services Coordination <a class="header-anchor" href="#external-services-coordination" aria-label="Permalink to &quot;External Services Coordination&quot;">​</a></h2><h3 id="bridges" tabindex="-1">Bridges <a class="header-anchor" href="#bridges" aria-label="Permalink to &quot;Bridges&quot;">​</a></h3><p>Bridge operators must be notified well in advance to:</p><ul><li><strong>Pause deposits</strong>: Stop accepting deposits before migration block</li><li><strong>Process withdrawals</strong>: Complete all pending withdrawals</li><li><strong>Update contracts</strong>: Deploy new bridge contracts on the migrated chain</li><li><strong>Map balances</strong>: Ensure locked tokens match bridged tokens on new chain</li></ul><p>Coordination checklist:</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Notify bridge operators 2 weeks before migration</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Pause bridge operations at block height - 100</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Export bridge state and locked balances</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Deploy new bridge contracts post-migration</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Verify balance mappings</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Resume operations after validation</span></span></code></pre></div><h3 id="block-explorers" tabindex="-1">Block Explorers <a class="header-anchor" href="#block-explorers" aria-label="Permalink to &quot;Block Explorers&quot;">​</a></h3><p>Explorer operators need to:</p><ul><li><strong>Archive old chain data</strong>: Maintain historical data accessibility</li><li><strong>Index new chain</strong>: Start indexing from new genesis</li><li><strong>Update chain ID</strong>: Configure explorer for new chain parameters</li><li><strong>Redirect users</strong>: Implement proper redirects and notifications</li></ul><p>Explorer coordination:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Provide explorer operators with:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> New</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genesis</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> New</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RPC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> endpoints</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chain</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Migration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> block</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> height</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reference</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Old</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> endpoints</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (if </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">maintaining</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="exchanges" tabindex="-1">Exchanges <a class="header-anchor" href="#exchanges" aria-label="Permalink to &quot;Exchanges&quot;">​</a></h3><p>Exchange integration requires careful coordination:</p><ul><li><strong>Trading halt</strong>: Suspend trading pairs before migration</li><li><strong>Deposit/withdrawal freeze</strong>: Stop all chain interactions</li><li><strong>Balance snapshot</strong>: Record user balances at migration height</li><li><strong>Node updates</strong>: Update exchange nodes to new chain</li><li><strong>Wallet updates</strong>: Reconfigure hot/cold wallets</li><li><strong>Resume operations</strong>: Gradual reopening after validation</li></ul><p>Exchange checklist:</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 30-day advance notice to exchanges</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Provide technical migration guide</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Coordinate maintenance windows</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Share new chain parameters</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Provide test environment access</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Confirm balance reconciliation</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Coordinate reopening schedule</span></span></code></pre></div><h3 id="defi-protocols" tabindex="-1">DeFi Protocols <a class="header-anchor" href="#defi-protocols" aria-label="Permalink to &quot;DeFi Protocols&quot;">​</a></h3><p>DeFi protocols and dApps require:</p><ul><li><strong>Pause operations</strong>: Freeze smart contract interactions</li><li><strong>State verification</strong>: Ensure protocol state consistency</li><li><strong>Contract redeployment</strong>: May need new deployments on migrated chain</li><li><strong>Liquidity migration</strong>: Coordinate liquidity provider transitions</li><li><strong>Oracle updates</strong>: Reconfigure price feeds and data sources</li></ul><h3 id="wallet-providers" tabindex="-1">Wallet Providers <a class="header-anchor" href="#wallet-providers" aria-label="Permalink to &quot;Wallet Providers&quot;">​</a></h3><p>Wallet services need updates for:</p><ul><li><strong>Chain ID</strong>: Update network configuration</li><li><strong>RPC endpoints</strong>: Point to new chain infrastructure</li><li><strong>Transaction history</strong>: Handle historical data appropriately</li><li><strong>User notifications</strong>: Inform users about the migration</li></ul><h2 id="important-considerations" tabindex="-1">Important Considerations <a class="header-anchor" href="#important-considerations" aria-label="Permalink to &quot;Important Considerations&quot;">​</a></h2><h3 id="data-integrity" tabindex="-1">Data Integrity <a class="header-anchor" href="#data-integrity" aria-label="Permalink to &quot;Data Integrity&quot;">​</a></h3><ul><li><strong>Verify state export</strong>: Check that all accounts and contracts are included</li><li><strong>Validate balances</strong>: Ensure total supply remains consistent</li><li><strong>Test transactions</strong>: Verify that transactions work on the new chain</li><li><strong>Cross-reference</strong>: Compare state roots between export and import</li></ul><h3 id="network-consensus" tabindex="-1">Network Consensus <a class="header-anchor" href="#network-consensus" aria-label="Permalink to &quot;Network Consensus&quot;">​</a></h3><ul><li><strong>Validator coordination</strong>: All validators must migrate simultaneously</li><li><strong>Genesis agreement</strong>: All nodes must use identical genesis files</li><li><strong>Time synchronization</strong>: Ensure all nodes have synchronized clocks</li><li><strong>Peer discovery</strong>: Update bootnodes and peer lists</li></ul><h3 id="rollback-planning" tabindex="-1">Rollback Planning <a class="header-anchor" href="#rollback-planning" aria-label="Permalink to &quot;Rollback Planning&quot;">​</a></h3><p>Prepare for potential issues:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Backup original datadir before migration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reth-backup-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +%Y%m%d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/reth/datadir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Keep original genesis and configuration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genesis-export.json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genesis-backup.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> evolve.yml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> evolve-backup.yml</span></span></code></pre></div><h3 id="communication-plan" tabindex="-1">Communication Plan <a class="header-anchor" href="#communication-plan" aria-label="Permalink to &quot;Communication Plan&quot;">​</a></h3><p>Establish clear communication channels:</p><ol><li><strong>Technical team channel</strong>: For real-time coordination</li><li><strong>Validator notifications</strong>: Direct communication with validators</li><li><strong>Public announcements</strong>: User-facing migration updates</li><li><strong>Service provider updates</strong>: Direct line to exchanges/explorers</li><li><strong>Emergency contacts</strong>: 24/7 availability during migration</li></ol><h2 id="post-migration-validation" tabindex="-1">Post-Migration Validation <a class="header-anchor" href="#post-migration-validation" aria-label="Permalink to &quot;Post-Migration Validation&quot;">​</a></h2><h3 id="_1-chain-health-checks" tabindex="-1">1. Chain Health Checks <a class="header-anchor" href="#_1-chain-health-checks" aria-label="Permalink to &quot;1. Chain Health Checks&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify chain is producing blocks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_blockNumber&quot;,&quot;params&quot;:[],&quot;id&quot;:1}&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  http://localhost:8545</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check peer connectivity</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;net_peerCount&quot;,&quot;params&quot;:[],&quot;id&quot;:1}&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  http://localhost:8545</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify chain ID</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_chainId&quot;,&quot;params&quot;:[],&quot;id&quot;:1}&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  http://localhost:8545</span></span></code></pre></div><h3 id="_2-state-verification" tabindex="-1">2. State Verification <a class="header-anchor" href="#_2-state-verification" aria-label="Permalink to &quot;2. State Verification&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sample account balance checks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getBalance&quot;,&quot;params&quot;:[&quot;0xADDRESS&quot;,&quot;latest&quot;],&quot;id&quot;:1}&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  http://localhost:8545</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify contract code</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getCode&quot;,&quot;params&quot;:[&quot;0xCONTRACT&quot;,&quot;latest&quot;],&quot;id&quot;:1}&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  http://localhost:8545</span></span></code></pre></div><h3 id="_3-service-validation" tabindex="-1">3. Service Validation <a class="header-anchor" href="#_3-service-validation" aria-label="Permalink to &quot;3. Service Validation&quot;">​</a></h3><ul><li><strong>Bridges</strong>: Test small value transfers in both directions</li><li><strong>Explorers</strong>: Verify block and transaction indexing</li><li><strong>Exchanges</strong>: Confirm deposit/withdrawal processing</li><li><strong>DeFi</strong>: Check protocol functionality and TVL consistency</li></ul><h2 id="migration-timeline-template" tabindex="-1">Migration Timeline Template <a class="header-anchor" href="#migration-timeline-template" aria-label="Permalink to &quot;Migration Timeline Template&quot;">​</a></h2><p>Here&#39;s a recommended timeline for chain migration:</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### T-30 days</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Initial migration announcement</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Technical documentation published</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Begin coordination with service providers</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### T-14 days</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Finalize migration block height</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Confirm participation from all validators</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Service providers confirm readiness</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### T-7 days</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Final migration parameters locked</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Test migration on testnet</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Public reminder announcements</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### T-24 hours</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Final coordination call</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Service suspension notifications</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Last-chance backups</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### T-0 (Migration)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Stop nodes at target height</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Export state</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Generate new genesis</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Initialize new chain</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Start new network</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Initial validation</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### T+6 hours</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Service providers begin reconnection</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Initial functionality tests</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Public progress updates</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### T+24 hours</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Full service restoration</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Post-migration report</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Address any issues</span></span></code></pre></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="common-issues-and-solutions" tabindex="-1">Common Issues and Solutions <a class="header-anchor" href="#common-issues-and-solutions" aria-label="Permalink to &quot;Common Issues and Solutions&quot;">​</a></h3><p><strong>State Export Failures</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># If export fails due to memory, increase heap size</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RETH_HEAP_SIZE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">8g</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reth</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dump-genesis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --datadir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/datadir</span></span></code></pre></div><p><strong>Genesis Initialization Errors</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify genesis file format</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> empty</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genesis-new.json</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Should return nothing if valid</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check for required fields</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.config.chainId, .alloc, .timestamp&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genesis-new.json</span></span></code></pre></div><p><strong>Node Sync Issues</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clear peer database and reconnect</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/datadir/nodes</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Restart with explicit bootnodes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">evolve</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --bootnodes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;enode://...&quot;</span></span></code></pre></div><h2 id="security-considerations" tabindex="-1">Security Considerations <a class="header-anchor" href="#security-considerations" aria-label="Permalink to &quot;Security Considerations&quot;">​</a></h2><ul><li><strong>Private key management</strong>: Never expose validator keys during migration</li><li><strong>Genesis distribution</strong>: Use secure channels for genesis file distribution</li><li><strong>Verification process</strong>: Multiple parties should verify genesis independently</li><li><strong>Access control</strong>: Limit access to migration operations to authorized personnel</li><li><strong>Audit trail</strong>: Maintain detailed logs of all migration activities</li></ul><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>Chain migration is a complex process requiring careful planning and coordination. Success depends on:</p><ol><li>Clear communication with all stakeholders</li><li>Thorough testing before migration</li><li>Precise coordination during migration</li><li>Comprehensive validation after migration</li><li>Ready rollback plans for contingencies</li></ol><p>Always perform a test migration on a testnet environment before attempting mainnet migration. Document all steps and maintain communication channels throughout the process.</p><h2 id="additional-resources" tabindex="-1">Additional Resources <a class="header-anchor" href="#additional-resources" aria-label="Permalink to &quot;Additional Resources&quot;">​</a></h2><ul><li><a href="https://paradigmxyz.github.io/reth/" target="_blank" rel="noreferrer">reth Documentation</a></li><li><a href="./single">Evolve EVM Single Sequencer Guide</a></li><li><a href="./reth-backup">Evolve State Backup Guide</a></li><li><a href="https://ethereum.github.io/execution-apis/api-documentation/" target="_blank" rel="noreferrer">Ethereum JSON-RPC Specification</a></li></ul>`,120)]))}const g=s(e,[["render",l]]);export{c as __pageData,g as default};
